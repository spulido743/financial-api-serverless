        # Determinar s√≠mbolos a procesar
        if is_from_eventbridge:
            print("ü§ñ EventBridge invocation - Processing watchlist")
            symbols_to_process = DEFAULT_WATCHLIST
            
        elif is_from_api_gateway:
            # Validar que pathParameters tenga contenido
            if not event.get('pathParameters') or not event['pathParameters'].get('symbol'):
                return create_response(400, {
                    'error': 'missing_parameter',
                    'message': 'Path parameter {symbol} is required'
                })
            
            symbol = event['pathParameters'].get('symbol', '').strip().upper()
            
            # Validar s√≠mbolo
            is_valid, result = validate_symbol(symbol)
            if not is_valid:
                return create_response(400, {
                    'error': 'invalid_symbol',
                    'message': result
                })
            
            symbols_to_process = [result]
            
        else:
            # Invocaci√≥n directa sin pathParameters ni source
            # Esto NO deber√≠a procesarse como watchlist autom√°ticamente
            return create_response(400, {
                'error': 'invalid_invocation',
                'message': 'Invalid invocation type. Use API Gateway or EventBridge.'
            })
